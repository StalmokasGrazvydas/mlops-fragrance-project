name: Azure ML Training

on:
  workflow_dispatch:
  push:
    paths:
      - "src/training/**"
      - "azureml/**"

jobs:
  train:
    runs-on: [self-hosted, windows, mlops]

    steps:
      - uses: actions/checkout@v4

      - name: Submit training job
        shell: pwsh
        run: |
          az ml job create `
            --file azureml/train-job.yml `
            --resource-group rg-nathan-mpops `
            --workspace-name mlops-grazvydas
